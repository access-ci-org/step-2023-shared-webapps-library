import{_ as l,o as c,c as u}from"./index-6a6e9b49.js";(function(){var n=function(t,e,i,s){this.data=[],this.year={min:e,max:i},this.parse(s||[]),typeof document<"u"&&(this.container=typeof t=="string"?document.querySelector("#"+t):t,this.drawSections(),this.insertData())};n.prototype.insertData=function(){for(var t=[],e=this.container.querySelector(".scale section").offsetWidth,i=0,s=this.data.length;s>i;i++){var a=this.data[i],o=this.createBubble(e,this.year.min,a.start,a.end),h=['<span style="margin-left: '+o.getStartOffset()+"px; width: "+o.getWidth()+'px;" class="bubble bubble-'+(a.type||"default")+'" data-duration="'+(a.end?Math.round((a.end-a.start)/1e3/60/60/24/39):"")+'"></span>','<span class="date">'+o.getDateLabel()+"</span> ",'<span class="label">'+a.label+"</span>"].join("");t.push("<li>"+h+"</li>")}this.container.innerHTML+='<ul class="data">'+t.join("")+"</ul>"},n.prototype.drawSections=function(){for(var t=[],e=this.year.min;e<=this.year.max;e++)t.push("<section>"+e+"</section>");this.container.className="timesheet color-scheme-default",this.container.innerHTML='<div class="scale">'+t.join("")+"</div>"},n.prototype.parseDate=function(t){return t.indexOf("/")===-1?(t=new Date(parseInt(t,10),0,1),t.hasMonth=!1):(t=t.split("/"),t=new Date(parseInt(t[1],10),parseInt(t[0],10)-1,1),t.hasMonth=!0),t},n.prototype.parse=function(t){for(var e=0,i=t.length;i>e;e++){var s=this.parseDate(t[e][0]),a=t[e].length===4?this.parseDate(t[e][1]):null,o=t[e].length===4?t[e][2]:t[e][1],h=t[e].length===4?t[e][3]:t[e].length===3?t[e][2]:"default";s.getFullYear()<this.year.min&&(this.year.min=s.getFullYear()),a&&a.getFullYear()>this.year.max?this.year.max=a.getFullYear():s.getFullYear()>this.year.max&&(this.year.max=s.getFullYear()),this.data.push({start:s,end:a,label:o,type:h})}},n.prototype.createBubble=function(t,e,i,s){return new r(t,e,i,s)};var r=function(t,e,i,s){this.min=e,this.start=i,this.end=s,this.widthMonth=t};r.prototype.formatMonth=function(t){return t=parseInt(t,10),t>=10?t:"0"+t},r.prototype.getStartOffset=function(){return this.widthMonth/12*(12*(this.start.getFullYear()-this.min)+this.start.getMonth())},r.prototype.getFullYears=function(){return(this.end&&this.end.getFullYear()||this.start.getFullYear())-this.start.getFullYear()},r.prototype.getMonths=function(){var t=this.getFullYears(),e=0;return this.end?this.end.hasMonth?(e+=this.end.getMonth()+1,e+=12-(this.start.hasMonth?this.start.getMonth():0),e+=12*(t-1)):(e+=12-(this.start.hasMonth?this.start.getMonth():0),e+=12*(t-1>0?t-1:0)):e+=this.start.hasMonth?1:12,e},r.prototype.getWidth=function(){return this.widthMonth/12*this.getMonths()},r.prototype.getDateLabel=function(){return[(this.start.hasMonth?this.formatMonth(this.start.getMonth()+1)+"/":"")+this.start.getFullYear(),this.end?"-"+((this.end.hasMonth?this.formatMonth(this.end.getMonth()+1)+"/":"")+this.end.getFullYear()):""].join("")},window.Timesheet=n})();function p(n,r){const t=new Date(n[1].split("/").reverse().join("-")),e=new Date(r[1].split("/").reverse().join("-"));return t<e?-1:t>e?1:0}const f={mounted(){fetch("https://operations-api.access-ci.org/wh2/cider/v1/access-allocated/").then(n=>n.json()).then(n=>{console.log(n);const t=n.results.map(e=>({resource_descriptive_name:e.resource_descriptive_name,latest_status_begin:e.latest_status_begin,latest_status_end:e.latest_status_end})).filter(e=>e.latest_status_begin&&e.latest_status_end).map(e=>{const i=new Date(e.latest_status_end),s=new Date,a=i.getTime()-s.getTime(),o=Math.ceil(a/(1e3*60*60*24));let h;return o<=365?h="default":o<=730?h="dolor":h="lorem",[e.latest_status_begin.slice(5,7)+"/"+e.latest_status_begin.slice(0,4),e.latest_status_end.slice(5,7)+"/"+e.latest_status_end.slice(0,4),e.resource_descriptive_name,h]});t.sort(p),new window.Timesheet("timesheet",2012,2050,t),console.log(t)})}},d={id:"timesheet"};function _(n,r,t,e,i,s){return c(),u("div",d)}const g=l(f,[["render",_],["__scopeId","data-v-b522ad30"]]);export{g as default};
